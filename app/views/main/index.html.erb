<% content_for :title, "re.factored" %>
<% content_for :stylesheet, "style.css" %>

<script type="text/javascript">
  function friendly(id, value) {
    text_input = document.getElementById(id);
    if (text_input.value == "") {
      text_input.value = value;
      oldstyle = text_input.style;
      document.getElementById(id).onfocus = function clear() {
        if (this.style.fontStyle == "italic")
          this.value = "";
        this.style.fontStyle = "normal";
        this.style.color = "#757575";
      };
      text_input.style.fontStyle = "italic";
      text_input.style.color = "#ddd";
    }
  }
  function after_load() {
    friendly("user_session_username", "Username");
    friendly("user_session_password", "Password");
  }
  window.onload = after_load;
</script>

<div id="bg">
  <img src="/images/grad.png" alt="" />
</div>
<div id="main">
  <div id="top">
  <div id ="header">
    <% if @current_user %>
      Welcome, <%= link_to  "#{@current_user.first_name} #{@current_user.last_name}", @current_user %>! Want to <%= link_to "sign out", logout_path %>?
    <% else %>
      Welcome! Want to <%= link_to "register", new_user_path %>?
    <% end %>
    <span id="school">
      You are in <a href="switch_school">UC Berkeley</a>
    </span>
  </div>
  <div id="maincol">
    <div id="banner">
      <% if @current_user %>
        <div id ="college_logo"></div>
      <% else %>
        <div id="banner_right">
          <div id="login_form">
            <!--span id="message" class="stryde">Remember my info, please.</span-->
            <% form_for @user_session do |f| %>
              <span id="input_label"><%= f.label :username, "Username", :class => "input_label" %></span>
              <%= f.text_field :username, :style => "width: 10em" %>
              <span id="input_label"><%= f.label :password, "Password", :class => "input_label" %></span>
              <%= f.password_field :password, :style => "width: 10em" %>
              <input type="checkbox" />
              <%= f.submit "", :class => "login_button", :onfocus => "this.blur()", :tabindex => 1000 %>
              <a class="login_button_load"></a>
            <% end %>
          </div></div>
      <% end %>
    </div>

    <div>
      <ul id ="breadcrumbs">
        <li class="breadcrumbs_a"><a href="">Home</a></li>
      </ul>
    </div>

    <div id="content">
      <% if @current_user %>
      <div id="content_left">
        <div id="courses">
          <span class="section_header">Subscribed Courses</span>
          
            <% @current_user.courses.each do |course| %>
              <% link_to course, :class => "name", :id => "#{course.department} #{course.number}" do %>
                <span class="course"><%=h course.department %> <%=h course.number %></span>
                <span class="stryde course_info"><%=h course.name %></span>
              <% end %>
              <%= link_to 'Edit', edit_course_path(course) %>
              <br />
            <% end %>
          
          <br />
          <%= link_to 'Edit Subscriptions', "edit" %>
          <%= link_to "New course", new_course_path %>
        </div>
        <br />
        <div id="otherstuff">
          <span class="section_header">Latest Posts</span>
        </div>
      </div>
      <% else %>
        <div id="welcome">
          <p class="stryde" id="welcome_title">What are we about?</p>
          <p>
            <strong>re.factored</strong> is a project by students for students. We're sick of
            old <acronym title="Course Management System">CMS</acronym>s that are hard to
            navigate and highly restricted. Because this is meant to be an invaluable utility
            used everyday, this site needs to be highly accessible and quickly bring users to
            what they need. However, that doesn't mean we need to sacrifice looks. We still
            believe in a modern, clean, yet usable design that makes school life a little bit
            easier. We want to give you, the student, the initiative.
          </p>
        </div>
      <% end %>
    </div>

    <% if @current_user %>
    <div id="calendar">
      <a id="calendar_title" href="calendar">Upcoming Events</a>
      <ul>
        <li class="calendar_entry">Oct 11 <a href="item1">CS 169 Midterm 1</a></li>
        <li class="calendar_entry">Oct 11 <a href="item1">CS 188 Midterm 2</a></li>
        <li class="calendar_entry">Oct 12 <a href="item1">CS 188 Project 2</a></li>
      </ul>
    </div>
    <% end %>
  </div>
  </div>
  <div id="footer">
    <span id="footer_links">
      <a href="help">Help</a>
      <a href="about">About</a>
      <a href="feedback">Feedback</a>
      <a href="contact">Contact</a>
    </span>
  </div>
</div>
